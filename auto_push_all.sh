#!/bin/bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—É—à –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ GitHub (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)

cd "/Users/egorryzhkov/Desktop/AI Double"

echo "üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ GitHub..."
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
if ! ping -c 1 github.com &> /dev/null; then
    echo "‚ö†Ô∏è –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É"
    echo "üí° –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
if git diff-index --quiet HEAD -- 2>/dev/null; then
    echo "‚úÖ –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
else
    echo "üìù –ö–æ–º–º–∏—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
    git add -A
    git commit -m "Auto-update: $(date '+%Y-%m-%d %H:%M:%S')" 2>/dev/null || echo "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π"
fi

# –ü—É—à –≤ –≤–µ—Ç–∫—É new-version
echo "üöÄ –ü—É—à–∏–º –≤ –≤–µ—Ç–∫—É new-version..."
git push origin new-version 2>&1

if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—à–µ–Ω–æ –≤ GitHub!"
    echo "üì± Streamlit Cloud –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã"
    echo ""
    echo "üîó –ù–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
else
    echo ""
    echo "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ"
    echo "üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:"
    echo "   - –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"
    echo "   - SSH –∫–ª—é—á –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ GitHub"
    echo "   - –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º"
fi
