#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—É—à–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ GitHub

cd "/Users/egorryzhkov/Desktop/AI Double"

echo "üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ GitHub..."
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
if git diff-index --quiet HEAD --; then
    echo "‚úÖ –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
else
    echo "üìù –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ–º–º–∏—Ç–∏–º..."
    git add -A
    git commit -m "Auto-update: $(date '+%Y-%m-%d %H:%M:%S')"
fi

# –ü—É—à –≤ –≤–µ—Ç–∫—É new-version
echo ""
echo "üöÄ –ü—É—à–∏–º –≤ –≤–µ—Ç–∫—É new-version..."
git push origin new-version

if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—à–µ–Ω–æ –≤ GitHub!"
    echo "üì± Streamlit Cloud –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã"
else
    echo ""
    echo "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É—à–µ. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:"
    echo "   1. –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"
    echo "   2. –ù—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è GitHub"
    echo ""
    echo "üí° –†–µ—à–µ–Ω–∏–µ:"
    echo "   - –ü—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç"
    echo "   - –í—ã–ø–æ–ª–Ω–∏ –≤—Ä—É—á–Ω—É—é: git push origin new-version"
    echo "   - –ò–ª–∏ –æ–±–Ω–æ–≤–∏ –¥–µ–ø–ª–æ–π –Ω–∞ Streamlit Cloud –≤—Ä—É—á–Ω—É—é"
fi
